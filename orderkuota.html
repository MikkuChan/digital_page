<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Order Kuota XL — FADZDigital</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/orderkuota.css" />
</head>
<body>
  <header class="site-header">
    <div class="wrap">
      <div class="brand">
        <span class="logo">FDZ</span>
        <div class="brand-text">
          <h1>FADZDigital</h1>
          <p>Jasa Order Kuota XL (via Duitku)</p>
        </div>
      </div>
      <nav class="nav">
        <a href="#" id="navHome" class="active">Beranda</a>
        <a href="#status" id="navStatus">Status</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <!-- Login OTP -->
    <section class="card" id="otpSection">
      <h2>1) Login Nomor XL kamu</h2>
      <p class="muted">Masukkan nomor XL (format 08xxxx). Kamu akan menerima OTP via SMS dari upstream.</p>
      <form id="otpForm" class="grid-otp">
        <div class="input-group">
          <label for="no_hp">Nomor XL</label>
          <input type="tel" id="no_hp" name="no_hp" placeholder="08xxxxxxxxxx" autocomplete="tel" required>
        </div>
        <div class="input-group btn-row">
          <button type="button" id="btnReqOtp" class="btn">Kirim OTP</button>
        </div>
        <div class="input-group">
          <label for="auth_id">Auth ID</label>
          <input type="text" id="auth_id" name="auth_id" placeholder="dari respon Kirim OTP" required>
        </div>
        <div class="input-group">
          <label for="kode_otp">Kode OTP</label>
          <input type="text" id="kode_otp" name="kode_otp" inputmode="numeric" placeholder="6 digit" required>
        </div>
        <div class="input-group btn-row">
          <button type="button" id="btnVerifyOtp" class="btn btn-primary">Verifikasi OTP</button>
        </div>
      </form>
      <div id="otpStatus" class="status"></div>
      <div id="sessionBadge" class="badge hidden">Nomor sudah login ✔</div>
    </section>

    <!-- Katalog Paket -->
    <section class="card" id="catalogSection">
      <h2>2) Pilih Paket</h2>
      <div id="catalogGrid" class="grid-cards"></div>
      <div id="catalogEmpty" class="empty hidden">Katalog kosong.</div>
    </section>

    <!-- Status & Pembayaran -->
    <section class="card" id="statusSection">
      <h2>3) Pembayaran & Status</h2>
      <div class="status-grid">
        <div>
          <label for="status_no_hp">Nomor XL</label>
          <input type="tel" id="status_no_hp" placeholder="08xxxxxxxxxx">
        </div>
        <div>
          <label for="status_order_id">Order ID</label>
          <input type="text" id="status_order_id" placeholder="FDZK-...">
        </div>
        <div class="btn-row">
          <button id="btnCheckStatus" class="btn">Cek Status</button>
          <button id="btnPollStatus" class="btn btn-outline">Auto Poll</button>
        </div>
      </div>

      <div id="payResult" class="pay-result">
        <!-- Dinamis: ringkasan order jasa, deeplink DANA/QRIS, dll -->
      </div>
    </section>

    <!-- Detail Paket Aktif -->
    <section class="card" id="detailSection">
      <h2>4) Detail Paket Aktif (opsional)</h2>
      <div class="status-grid">
        <div>
          <label for="detail_no_hp">Nomor XL</label>
          <input type="tel" id="detail_no_hp" placeholder="08xxxxxxxxxx">
        </div>
        <div class="btn-row">
          <button id="btnFetchDetail" class="btn">Cek Paket Aktif</button>
        </div>
      </div>
      <div id="detailBox" class="detail-box"></div>
    </section>
  </main>

  <!-- Modal (Pembayaran Duitku) -->
  <div id="modal" class="modal hidden">
    <div class="modal-card">
      <button class="modal-close" id="modalClose" aria-label="Tutup">✕</button>
      <h3>Bayar Jasa via Duitku</h3>
      <p>Buka link pembayaran di tab baru. Setelah bayar, halaman ini akan otomatis memantau status.</p>
      <div class="modal-actions">
        <a id="openPayLink" href="#" class="btn btn-primary" target="_blank" rel="noopener">Buka Link Pembayaran</a>
        <button id="startPolling" class="btn btn-outline">Mulai Auto Poll</button>
      </div>
      <div id="modalInfo" class="muted small"></div>
    </div>
  </div>

  <footer class="site-footer">
    <div class="wrap">
      <p>© <span id="year"></span> FADZDigital</p>
    </div>
  </footer>

  <script>window.FDZ_BACKEND_BASE="https://call.fadzdigital.store";</script>
  <script src="js/orderkuota.js" defer></script>
</body>
</html>
